@{
    Layout = null;
    int isAuthenticatedJS = 0;

    if (Request.IsAuthenticated)
    {
        isAuthenticatedJS = 1;
    }
}


<script type="text/javascript">

    function updateVotes(elem, result) {
        if (result == "") {
            return;
        }

        var tmp = JSON.parse(result);

        elem.querySelector(".vote_count").innerHTML = tmp.VoteCount;
        elem.style.color = (tmp.Voted == "1") ? "blue" : "black";
        elem.style.visibility = "visible";
    }

    function InitComment(elem, CommentId) {
        $.ajax({
            type: 'GET',
            url: '/UpvoteComment/Initialize',
            data: { 'CommentId': CommentId },
            success: function (result) {
                updateVotes(elem, result);
            }
        });
    }

    $(document).ready(function () {
        for (elem of document.getElementsByClassName("comment-vote-container")) {
            let CommentId = parseInt(elem.getAttribute("CommentId"), 10);
            InitComment(elem, CommentId);
        }
    });

    function VoteComment(elemId, CommentId) {
        $.ajax({
            type: 'GET',
            url: '/UpvoteComment/Vote',
            data: { 'CommentId': JSON.stringify(CommentId) },
            success: function (result) { updateVotes(elemId, result); },
            error: function (result) {
                alert("Error " + result)
            }
        });
    }

    function ClearComment(elemId, CommentId) {
        $.ajax({
            type: 'GET',
            url: '/UpvoteComment/Clear',
            data: { 'CommentId': JSON.stringify(CommentId) },
            success: function (result) { updateVotes(elemId, result); }
        });
    }

</script>
